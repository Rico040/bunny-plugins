(function(n,e,r,s,g,o,f,m){"use strict";var v=r.findByProps("canUseEmojisEverywhere"),E=[s.instead("canUseEmojisEverywhere",v,()=>!0),s.instead("canUseAnimatedEmojis",v,()=>!0)],{getCustomEmojiById:h}=r.findByStoreName("EmojiStore"),{getGuildId:u}=r.findByStoreName("SelectedGuildStore"),F=/<a?:(\w+):(\d+)>/i;function R(t,a){var M=t.matchAll(/<a?:(\w+):(\d+)>/gi);for(var i of M){var l=h(i[2]);if(l.guildId!=u()||l.animated){var N="webp",d=`https://cdn.discordapp.com/emojis/${i[2]}.${N}?size=${a}&quality=lossless&name=${i[1]}`;l.animated&&(d+="&animated=true");var C=e.storage.customHyperLinkString||i[1],H=e.storage.hyperlink?`[${C}](${d})`:d;t=t.replace(i[0],H)}}return{newContent:t.trim()}}function y(t){if(t.content.match(F)&&!(!e.storage.forceMoji&&e.storage.haveNitro)){var{newContent:a}=R(t.content,e.storage.emojiSize);t.content=a,t.invalidEmojis=[]}}var b=r.findByProps("sendMessage","receiveMessage"),j=r.findByProps("uploadLocalFiles"),k=[s.before("sendMessage",b,t=>y(t[1])),...j?[s.before("uploadLocalFiles",j,t=>y(t[0].parsedMessage))]:[]],{FormSection:c,FormRadioRow:w,FormSwitchRow:S}=o.Forms,z={Tiny:16,Small:32,Medium:48,Big:56,Large:64,Huge:96,Jumbo:128},B="https://cdn.discordapp.com/emojis/926602689213767680.webp",I=()=>(f.useProxy(e.storage),React.createElement(g.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(c,{title:"Settings",titleStyleType:"no_border"},React.createElement(S,{label:"Force Freemoji",subLabel:"Explicitly force Freemoji even if you have nitro (useful for testing)",leading:React.createElement(o.Forms.FormIcon,{source:m.getAssetIDByName("img_nitro_emojis")}),value:e.storage.forceMoji,onValueChange:()=>{e.storage.forceMoji=!e.storage.forceMoji},note:""}),React.createElement(S,{label:"Hyperlink emoji",subLabel:"Hyperlinks emoji link to be less distractive",leading:React.createElement(o.Forms.FormIcon,{source:m.getAssetIDByName("ic_link")}),value:e.storage.hyperlink,onValueChange:()=>{e.storage.hyperlink=!e.storage.hyperlink},note:""}),React.createElement(o.Forms.FormRow,{label:"Custom Hyperlink text",leading:React.createElement(o.Forms.FormIcon,{source:m.getAssetIDByName("ic_link")})}),React.createElement(o.Forms.FormInput,{title:"",placeholder:"Put text here. Leave empty to use emoji's name.",value:e.storage.customHyperLinkString,onChange:t=>e.storage.customHyperLinkString=t,style:{marginTop:-25,marginHorizontal:12}})),React.createElement(c,{title:"Emoji Size"},Object.entries(z).map(([t,a])=>React.createElement(w,{label:t,subLabel:a,selected:e.storage.emojiSize===a,onPress:()=>{e.storage.emojiSize=a}}))),React.createElement(c,{title:"Preview"},React.createElement(g.ReactNative.Image,{source:{uri:`${B}?size=${e.storage.emojiSize}`,width:e.storage.emojiSize,height:e.storage.emojiSize}}))));e.storage.emojiSize??=48,e.storage.hyperlink??=!0,e.storage.haveNitro??=r.findByStoreName("UserStore").getCurrentUser()?.premiumType!==null,e.storage.forceMoji??=!1,e.storage.customHyperLinkString??="",typeof e.storage.emojiSize=="string"&&(e.storage.emojiSize=parseInt(e.storage.emojiSize));var L=[...E,...k],$=()=>L.forEach(t=>t());return n.onUnload=$,n.settings=I,n})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.ui.assets);
